---
title: "Machado de Assis - Textual Analysis Agent"
sidebar_position: 7
description: "Mestre em an√°lise textual e processamento de linguagem natural"
---

# üìö Machado de Assis - Textual Analysis Agent

:::info **Status: ‚úÖ Totalmente Funcional**
Implementado em `src/agents/machado.py` com capacidades avan√ßadas de NLP e an√°lise documental.
:::

## üìã Vis√£o Geral

**Machado de Assis**, inspirado no maior escritor brasileiro, √© o agente especializado em an√°lise textual profunda de documentos governamentais. Com sua perspic√°cia liter√°ria, identifica nuances, ambiguidades e potenciais irregularidades em textos contratuais e legais.

## üéØ Capacidades Principais

### 1. **Extra√ß√£o de Entidades (NER)** üè∑Ô∏è
- Identifica√ß√£o de organiza√ß√µes, pessoas e locais
- Extra√ß√£o de valores monet√°rios e datas
- Reconhecimento de c√≥digos e refer√™ncias
- Valida√ß√£o de CPF/CNPJ em textos

### 2. **An√°lise de Cl√°usulas Contratuais** üìÑ
```python
SUSPICIOUS_PATTERNS = [
    "pagamento antecipado",
    "sem necessidade de comprova√ß√£o",
    "a crit√©rio exclusivo",
    "dispensada licita√ß√£o"
]
```
- Detec√ß√£o de cl√°usulas abusivas
- Identifica√ß√£o de termos vagos
- An√°lise de obriga√ß√µes desequilibradas
- Verifica√ß√£o de garantias

### 3. **Avalia√ß√£o de Conformidade Legal** ‚öñÔ∏è
- Checagem contra Lei 8.666/93
- Valida√ß√£o de requisitos legais
- Identifica√ß√£o de omiss√µes cr√≠ticas
- An√°lise de fundamenta√ß√£o legal

### 4. **M√©tricas de Transpar√™ncia** üîç
```python
transparency_score = {
    "clarity": 0.85,        # Clareza do texto
    "completeness": 0.92,   # Completude das informa√ß√µes
    "objectivity": 0.78,    # Objetividade
    "accessibility": 0.81   # Acessibilidade lingu√≠stica
}
```

### 5. **An√°lise de Complexidade** üìä
- √çndice de legibilidade (Flesch)
- Complexidade sint√°tica
- Densidade de jarg√£o t√©cnico
- Acessibilidade para cidad√£o comum

## üíª Implementa√ß√£o T√©cnica

### Estrutura Principal
```python
class MachadoAgent(ReflectiveAgent):
    def __init__(self):
        super().__init__(
            agent_id="machado",
            name="Machado de Assis",
            description="Especialista em an√°lise textual e conformidade",
            capabilities=[
                "document_parsing",
                "ner_extraction",
                "clause_analysis", 
                "legal_compliance",
                "readability_assessment",
                "semantic_analysis"
            ]
        )
        self.nlp = self._initialize_nlp()
        self.legal_knowledge = self._load_legal_knowledge()
```

### Exemplo de An√°lise Completa
```python
from src.agents.machado import MachadoAgent

machado = MachadoAgent()

# Documento para an√°lise
document = {
    "type": "contract",
    "content": """
    CONTRATO N¬∫ 123/2024
    
    CL√ÅUSULA PRIMEIRA - DO OBJETO
    O presente contrato tem por objeto a aquisi√ß√£o de equipamentos
    m√©dicos, conforme especifica√ß√µes constantes no Anexo I, com 
    pagamento antecipado de 50% do valor total, a crit√©rio exclusivo
    da CONTRATANTE, dispensada a apresenta√ß√£o de garantias.
    
    CL√ÅUSULA SEGUNDA - DO VALOR
    O valor global do presente contrato √© de R$ 5.000.000,00
    (cinco milh√µes de reais), podendo sofrer acr√©scimos a crit√©rio
    da administra√ß√£o sem necessidade de aditivo contratual.
    """,
    "metadata": {
        "organ": "Minist√©rio da Sa√∫de",
        "date": "2024-01-15",
        "process": "23000.123456/2024-00"
    }
}

# Executar an√°lise
result = await machado.process(
    AgentMessage(content={"document": document})
)

# Resultado da an√°lise
{
    "analysis": {
        "risk_level": "HIGH",
        "confidence": 0.91,
        
        "entities_extracted": {
            "contract_number": "123/2024",
            "value": 5000000.00,
            "currency": "BRL",
            "organ": "Minist√©rio da Sa√∫de",
            "date": "2024-01-15",
            "process": "23000.123456/2024-00"
        },
        
        "suspicious_clauses": [
            {
                "clause": "PRIMEIRA",
                "issue": "Pagamento antecipado sem garantias",
                "severity": "CRITICAL",
                "legal_basis": "Art. 65, Lei 8.666/93",
                "recommendation": "Exigir garantia proporcional"
            },
            {
                "clause": "SEGUNDA",
                "issue": "Acr√©scimos sem aditivo contratual",
                "severity": "HIGH",
                "legal_basis": "Art. 65, ¬ß1¬∫, Lei 8.666/93",
                "recommendation": "Limitar a 25% com aditivo formal"
            }
        ],
        
        "compliance_issues": [
            "Aus√™ncia de cl√°usulas obrigat√≥rias",
            "Falta de especifica√ß√£o detalhada do objeto",
            "Pagamento antecipado irregular",
            "Altera√ß√µes contratuais sem formaliza√ß√£o"
        ],
        
        "transparency_metrics": {
            "clarity_score": 0.45,
            "completeness": 0.38,
            "legal_compliance": 0.25,
            "overall_transparency": 0.36
        },
        
        "readability": {
            "flesch_score": 42,
            "interpretation": "Dif√≠cil",
            "grade_level": "Universit√°rio",
            "jargon_density": 0.28
        }
    },
    
    "alerts": [
        {
            "type": "CRITICAL",
            "message": "Contrato com m√∫ltiplas irregularidades graves",
            "action": "Recomendar revis√£o completa ou anula√ß√£o"
        }
    ],
    
    "next_steps": [
        "Investigar processo licitat√≥rio",
        "Verificar justificativas para pagamento antecipado",
        "Analisar contratos similares do √≥rg√£o"
    ]
}
```

## üõ†Ô∏è T√©cnicas de An√°lise

### 1. **Processamento com spaCy**
```python
def extract_entities(self, text):
    """Extra√ß√£o avan√ßada de entidades"""
    doc = self.nlp(text)
    
    entities = {
        "organizations": [],
        "people": [],
        "money": [],
        "dates": [],
        "locations": []
    }
    
    for ent in doc.ents:
        if ent.label_ == "ORG":
            entities["organizations"].append(ent.text)
        elif ent.label_ == "PER":
            entities["people"].append(ent.text)
        elif ent.label_ == "MONEY":
            value = self.parse_monetary_value(ent.text)
            entities["money"].append(value)
        # ... mais categorias
    
    return entities
```

### 2. **Detec√ß√£o de Padr√µes Suspeitos**
```python
SUSPICIOUS_PATTERNS = {
    "pagamento_antecipado": {
        "pattern": r"pagamento\s+antecipado|antecipa[√ßc][√£a]o\s+de\s+pagamento",
        "severity": "HIGH",
        "legal_concern": "Viola√ß√£o do art. 65 da Lei 8.666/93"
    },
    "sem_licitacao": {
        "pattern": r"dispensa(da)?\s+licita[√ßc][√£a]o|inexigibilidade",
        "severity": "MEDIUM",
        "requires_justification": True
    },
    "clausula_aberta": {
        "pattern": r"a\s+crit[√©e]rio\s+(exclusivo\s+)?da|conforme\s+conveni[√™e]ncia",
        "severity": "MEDIUM",
        "legal_concern": "Falta de objetividade"
    }
}
```

### 3. **An√°lise de Conformidade**
```python
def check_mandatory_clauses(self, contract_text):
    """Verifica presen√ßa de cl√°usulas obrigat√≥rias"""
    mandatory = [
        "objeto",
        "pre√ßo e condi√ß√µes de pagamento",
        "prazos",
        "cr√©dito or√ßament√°rio",
        "direitos e responsabilidades",
        "penalidades",
        "casos de rescis√£o",
        "legisla√ß√£o aplic√°vel"
    ]
    
    missing = []
    for clause in mandatory:
        if not self.find_clause(contract_text, clause):
            missing.append(clause)
    
    return {
        "compliant": len(missing) == 0,
        "missing_clauses": missing,
        "compliance_rate": (len(mandatory) - len(missing)) / len(mandatory)
    }
```

## üìä M√©tricas e Performance

### Indicadores de Qualidade
| M√©trica | Valor | Meta | Status |
|---------|-------|------|--------|
| Precis√£o NER | 92% | >90% | ‚úÖ |
| Detec√ß√£o de Irregularidades | 88% | >85% | ‚úÖ |
| Tempo de An√°lise (doc) | 2.3s | <3s | ‚úÖ |
| Cobertura de Testes | 91% | >90% | ‚úÖ |

### Benchmarks por Tipo de Documento
- **Contrato Simples**: ~1.5s
- **Edital Complexo**: ~4.2s
- **Ata de Registro**: ~2.1s
- **Termo Aditivo**: ~0.8s

## üîß Configura√ß√£o e Personaliza√ß√£o

### Par√¢metros Ajust√°veis
```yaml
machado:
  nlp_model: "pt_core_news_lg"
  
  thresholds:
    min_transparency_score: 0.7
    max_jargon_density: 0.3
    min_readability: 50
    
  analysis:
    enable_spell_check: true
    detect_duplicates: true
    check_references: true
    validate_numbers: true
    
  compliance:
    strict_mode: false
    laws_database: "2024_updated"
    check_amendments: true
```

### Customiza√ß√£o por Tipo de Documento
```python
DOCUMENT_PROFILES = {
    "contract": {
        "mandatory_sections": ["objeto", "valor", "prazo", "penalidades"],
        "risk_patterns": CONTRACT_RISK_PATTERNS,
        "reference_law": "Lei 8.666/93"
    },
    "bidding_notice": {
        "mandatory_sections": ["objeto", "requisitos", "criterios", "prazos"],
        "risk_patterns": BIDDING_RISK_PATTERNS,
        "reference_law": "Lei 14.133/21"
    }
}
```

## üß™ Testes e Valida√ß√£o

### Suite de Testes
```bash
# Testes completos
pytest tests/unit/test_agents/test_machado.py -v

# Testes de NER
pytest -k "test_entity_extraction"

# Testes de conformidade
pytest -k "test_legal_compliance"

# Benchmark de performance
pytest tests/performance/test_machado_speed.py
```

## üîÑ Integra√ß√£o com Outros Agentes

### Pipeline de An√°lise
```mermaid
graph LR
    M[Machado] -->|Entidades| A[Anita]
    M -->|Irregularidades| Z[Zumbi]
    M -->|Relat√≥rio| T[Tiradentes]
    M -->|Quest√µes Sociais| D[Dandara]
    
    A -->|Padr√µes| M
    Z -->|Contexto| M
```

### Exemplo de Colabora√ß√£o
```python
# Machado detecta empresa suspeita
{
    "finding": "empresa_suspicious",
    "entity": "XPTO Ltda",
    "cnpj": "00.000.000/0001-00",
    "reason": "M√∫ltiplos contratos com pagamento antecipado"
}

# Envia para Zumbi investigar
{
    "action": "investigate_vendor",
    "vendor": "XPTO Ltda",
    "focus": "payment_patterns",
    "priority": "high"
}
```

## üöÄ Funcionalidades Avan√ßadas

### 1. **An√°lise Sem√¢ntica Profunda**
- Detec√ß√£o de contradi√ß√µes
- Identifica√ß√£o de ambiguidades
- An√°lise de coer√™ncia
- Valida√ß√£o cruzada

### 2. **Compara√ß√£o de Documentos**
- Similaridade entre contratos
- Evolu√ß√£o de cl√°usulas
- Detec√ß√£o de templates
- An√°lise de varia√ß√µes

### 3. **Gera√ß√£o de Insights**
- Sugest√µes de melhoria
- Alertas preventivos
- Recomenda√ß√µes legais
- Boas pr√°ticas

## üìö Base de Conhecimento

### Legisla√ß√£o Integrada
- Lei 8.666/93 (Licita√ß√µes)
- Lei 14.133/21 (Nova Lei)
- Lei 12.527/11 (LAI)
- Decretos e normativas
- Jurisprud√™ncia TCU

### Padr√µes de Refer√™ncia
- Modelos AGU
- Templates TCU
- Boas pr√°ticas CGU
- Normas setoriais

---

**Anterior:** [üß† Nan√£ - Memory Agent](./nana.md)  
**Pr√≥ximo:** [‚öñÔ∏è Dandara - Social Justice Agent ‚Üí](./dandara.md)